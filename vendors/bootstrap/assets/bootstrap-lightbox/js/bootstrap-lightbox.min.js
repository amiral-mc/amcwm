/*!
* bootstrap-lightbox.js v0.6.1 
* Copyright 2013 Jason Butz
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/
!function(t){"use strict";var e=function(e,i){this.options=i,this.$element=t(e).delegate('[data-dismiss="lightbox"]',"click.dismiss.lightbox",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".lightbox-body").load(this.options.remote)};e.prototype=t.extend({},t.fn.modal.Constructor.prototype),e.prototype.constructor=e,e.prototype.enforceFocus=function(){var e=this;t(document).on("focusin.lightbox",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},e.prototype.show=function(){var e=this,i=t.Event("show");this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.preloadSize(function(){e.backdrop(function(){var i=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),i&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),i?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")})}))},e.prototype.hide=function(e){e&&e.preventDefault();e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.lightbox"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},e.prototype.escape=function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.lightbox",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.lightbox")},e.prototype.preloadSize=function(e){var i=t.Callbacks();e&&i.add(e);var n,o,s,h,a,d,l,r,g,c,f=this;n=t(window).height(),o=t(window).width(),s=parseInt(f.$element.find(".lightbox-content").css("padding-top"),10),h=parseInt(f.$element.find(".lightbox-content").css("padding-bottom"),10),a=parseInt(f.$element.find(".lightbox-content").css("padding-left"),10),d=parseInt(f.$element.find(".lightbox-content").css("padding-right"),10),l=f.$element.find(".lightbox-content").find("img:first"),r=new Image,r.onload=function(){r.width+a+d>=o&&(g=r.width,c=r.height,r.width=o-a-d,r.height=c/g*r.width),r.height+s+h>=n&&(g=r.width,c=r.height,r.height=n-s-h,r.width=g/c*r.height),f.$element.css({position:"fixed",width:r.width+a+d,height:r.height+s+h,top:n/2-(r.height+s+h)/2,left:"50%","margin-left":-1*(r.width+a+d)/2}),f.$element.find(".lightbox-content").css({width:r.width,height:r.height}),i.fire()},r.src=l.attr("src")};var i=t.fn.lightbox;t.fn.lightbox=function(i){return this.each(function(){var n=t(this),o=n.data("lightbox"),s=t.extend({},t.fn.lightbox.defaults,n.data(),"object"==typeof i&&i);o||n.data("lightbox",o=new e(this,s)),"string"==typeof i?o[i]():s.show&&o.show()})},t.fn.lightbox.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.lightbox.Constructor=e,t.fn.lightbox.noConflict=function(){return t.fn.lightbox=i,this},t(document).on("click.lightbox.data-api",'[data-toggle*="lightbox"]',function(e){var i=t(this),n=i.attr("href"),o=i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,""),s=i.data("caption"),h=t(o);if(0===h.length){var a={"class":"lightbox hide fade",tabindex:"-1",role:"dialog","aria-hidden":"true"};"#"==o[0]?a.id=o.substring(1):"."==o[0]&&(a["class"]=a["class"]+" "+o.substring(1));var h=t("<div>",a);h.html('<div class="lightbox-content"><img><div class="lightbox-caption"><p></p></div></div>'),t("body").append(h)}var d=h.find("img"),l=t(".lightbox-caption > p",h);0!=d.length&&d.attr("src",n),l.length&&s&&l.text(s);var r=h.data("lightbox")?"toggle":t.extend({remote:!/#/.test(n)&&n},h.data(),i.data());e.preventDefault(),h.lightbox(r).one("hide",function(){i.focus()})})}(window.jQuery);